# 字符串的扩展

## 字符的 Unicode 表示法

1. 支持Unicode码表示一个字符：`\u0000`~`\uFFFF`
   1. 超出范围必须使用上述两个Unicode码表示
   2. 否则会理解成unicode字符码，加上后面的字符串的形式
   3. 对码点加上大括号，可解读所有字符：`\u{xxxx}`
2. JavaScript表示字符的六种方法，如下：
   1. '\z'
   2. '\172'：八进制
   3. '\x7A'：十六进制
   4. '\u007A'
   5. '\u{7A}'

## 字符串的遍历器接口

1. 为字符串添加了遍历器接口，可以使用for……of遍历
2. for……of可遍历大于0xFFFF的码点，for……in不可遍历此类码点

扩展：
1. for……of和for……in的异同？
   1. for……of遍历可迭代对象：array、string、map、set、arguments（包括doms）、生成器、typedarray(`[0x00, 0xff]`)、其他可迭代对象，并返回每项的value
   2. for……of可使用break、throw continue、return中止迭代
   3. for……in遍历一个对象的可枚举属性

## 直接输入 U+2028 和 U+2029

1. JavaScript允许直接输入字符，以及他的Unicode码格式，两者是等价的
2. 但反斜杠、回车、换行符、行（段）分隔符只能使用转义形式
3. es2019允许字符串中输入行（段）分隔符，但正则表达式中不允许输入

## JSON.stringify() 的改造

1. json标准数据必须是utf-8编码
2. 在`0xD800`~`0xDFFF`之间的字符需要配对使用，且必须是配对已有的字符
3. es2019之前，他会返回单个码点`\u{D834}` => `"\u{D834}"`
4. ES2019中，遇到该范围码点，且配对不合法，会直接返回转义字符`\u{D834}` => `"\\uD834"`

## 模板字符串

1. 使用反引号表示，可定义多行字符串、或在字符串中嵌入变量
2. 定义多行字符串时，空格、缩进会原样保留
3. 嵌入变量，应在反引号内部使用`${var}`的形式
   1. var可以是变量，也可以是表达式（会自动执行，然后返回结果）
   2. var的值非普通字符串，会按照一般规则返回字符串形式
   3. var同样可以是一个模板字符串，可形成套娃形式（层层嵌套）

## 实例：模板编译

作用：将一个字符串模板编译成一个html模板（🔴没细看，感觉有点难）

```javascript
// origin
let template = `
<ul>
  <% for(let i=0; i < data.supplies.length; i++) { %>
    <li><%= data.supplies[i] %></li>
  <% } %>
</ul>
`;

// template html
<ul>
  <li>broom</li>
  <li>mop</li>
  <li>cleaner</li>
</ul>
```

## 标签模板（🟡）

公式如下：
```javascript
func`Hello ${a} world ${b}`
=>=>=>=>=>=>=>=>=>=>=>=>=>
func(['hello ', ' world ', ''], `${a}`,`${b}`)

```

1. 标签模板是函数调用的另一种方式，其中标签指的是函数，模板是函数的参数
2. 函数与模板直接不能有空格
3. 模板将常量字符串进行了分割，成为了函数参数第一个变量，后续变量依次为从左到右的变量字符串
4. 作用：
   1. 通过参数传递到函数内部，将html模板进行过滤，防止恶意输入
   2. 进行多语言转换，在JavaScript语言中嵌入其他语言

## 模板字符串的限制（🟡）


