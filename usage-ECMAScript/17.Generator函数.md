# Generatorå‡½æ•°

## åŸºæœ¬æ¦‚å¿µ

1. Generatorå‡½æ•°ç‰¹å¾ï¼š
   1. functionå…³é”®å­—å’Œå‡½æ•°åä¹‹é—´æœ‰ä¸ªæ˜Ÿå·(*)ï¼Œè¯¥æ˜Ÿå·å¹¶æœªè§„å®šç‰¹å®šä½ç½®ï¼Œä¸€èˆ¬è®¤ä¸ºç´§è·Ÿ`function*`
   2. å‡½æ•°ä½“å†…éƒ¨ä½¿ç”¨yieldè¡¨è¾¾å¼ï¼Œå®šä¹‰ä¸åŒçš„å†…éƒ¨çŠ¶æ€
2. Generatorå‡½æ•°çš„æ‰§è¡Œï¼š
   1. è°ƒç”¨Generatorå‡½æ•°ä¼šè¿”å›ä¸€ä¸ªæŒ‡å‘è¯¥å‡½æ•°å†…éƒ¨æŒ‡é’ˆçš„å¯¹è±¡ï¼ˆå³éå†å™¨å¯¹è±¡ï¼šå¯è¿›è¡Œå¾ªç¯éå†ï¼‰ï¼Œè¯¥å‡½æ•°å¹¶ä¸æ‰§è¡Œ
   2. ä¹‹åä½¿ç”¨next()æ–¹æ³•æ¥è·å–ä¸‹ä¸€ä¸ªyieldè¡¨è¾¾å¼çš„å€¼çš„å¯¹è±¡ï¼Œå½“æœ€ç»ˆç»“æœä¸º`{value: undefined, done: true}`æ—¶ï¼Œè¡¨ç¤ºéå†ç»“æŸï¼Œå†æ¬¡è°ƒç”¨ï¼Œå°†è¿”å›åŒæ ·çš„ç»“æœ
3. yieldè¡¨è¾¾å¼ï¼šğŸ…
   1. éå†å™¨å¯¹è±¡ï¼Œé‡åˆ°yieldä¹‹åï¼Œå°±æš‚åœåé¢çš„æ“ä½œï¼Œå¹¶å°†yieldè¡¨è¾¾å¼çš„å€¼ï¼Œèµ‹ç»™è¿”å›å¯¹è±¡çš„valueå±æ€§ï¼›è‹¥yieldåé¢ä¸ºç©ºï¼Œåˆ™valueå±æ€§ä¸ºundefined
   2. å½“è°ƒç”¨nextæ–¹æ³•ä¸€ç›´æœªé‡åˆ°yieldè¡¨è¾¾å¼ï¼Œåˆ™è¿è¡Œåˆ°å‡½æ•°ç»“å°¾ï¼Œå¹¶å°†returnçš„å€¼ä½œä¸ºvalueå±æ€§å€¼ï¼›æ— returnè¯­å¥ï¼Œåˆ™valueå±æ€§å€¼ä¸ºundefined
   3. yieldè¡¨è¾¾å¼åé¢çš„å†…å®¹ï¼Œåªæœ‰å½“è°ƒç”¨nextæ–¹æ³•æ—¶æ‰ä¼šè¢«æ‰§è¡Œï¼Œç›¸å½“äºæä¾›äº†æ‰‹åŠ¨æƒ°æ€§æ±‚å€¼çš„æ–¹æ³•
   4. å½“generatorå‡½æ•°å†…æ— yieldè¯­å¥æ—¶ï¼Œç›¸å½“äºå•çº¯çš„æš‚åœå‡½æ•°ï¼Œè°ƒç”¨nextåæ‰§è¡Œè¯¥å‡½æ•°
   5. yieldè¡¨è¾¾å¼åªèƒ½å‡ºç°åœ¨generatorå‡½æ•°ä¸­ï¼Œå‡ºç°åœ¨å…¶ä»–åœ°æ–¹ä¼šæŠ¥é”™
   6. yieldç”¨åœ¨å…¶ä»–è¡¨è¾¾å¼å†…éƒ¨æ—¶ï¼Œéœ€è¦ä½¿ç”¨å°æ‹¬å·æ‹¬èµ·æ¥ï¼›å½“yieldç”¨åœ¨å‡½æ•°å‚æ•°/èµ‹å€¼è¡¨è¾¾å¼å³ä¾§æ—¶ï¼Œå¯ä»¥ä¸åŠ æ‹¬å·
4. generatorä¸iteratorçš„è”ç³»ï¼šğŸ§ƒ
   1. ä»»ä½•å¯¹è±¡çš„`[Symbol.iterator]`æ–¹æ³•ï¼Œç­‰äºè¯¥å¯¹è±¡çš„éå†å™¨ç”Ÿæˆå‡½æ•°ï¼Œè°ƒç”¨è¯¥æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼›æ‰€ä»¥å¯ä»¥å°†generatorå‡½æ•°èµ‹ç»™å¯¹è±¡çš„è¯¥æ–¹æ³•ï¼Œä¹‹åè¯¥å¯¹è±¡å°±å¯ä»¥è¢«å¾ªç¯éå†äº†ï¼Œæ¯”å¦‚forï¼Œ`...`è¿ç®—ç¬¦ç­‰
   2. generatorå‡½æ•°æ‰§è¡Œåï¼Œè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œè¯¥éå†å™¨å¯¹è±¡ä¹Ÿæœ‰`[Symbol.iterator]`æ–¹æ³•ï¼Œæ‰§è¡Œåè¿”å›è¯¥å¯¹è±¡æœ¬èº«
5. generatorå‡½æ•°çš„å †æ ˆä¸Šä¸‹æ–‡ï¼š
   1. ä¸€èˆ¬çš„JavaScriptä»£ç è¿è¡Œæ—¶ï¼Œä¼šå½¢æˆä¸€ä¸ªä¸Šä¸‹æ–‡ç¯å¢ƒçš„å †æ ˆï¼ˆå…ˆè¿›åå‡ºç»“æ„ï¼‰ï¼Œæœ€åäº§ç”Ÿçš„ä¸Šä¸‹æ–‡ï¼Œæœ€å…ˆé€€å‡ºå †æ ˆ
   2. generatoräº§ç”Ÿçš„ä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œé‡åˆ°yieldåï¼Œä¼šé€€å‡ºå †æ ˆï¼Œä½†ä¸æ¶ˆå¤±ï¼ˆå¤„äºæš‚åœçŠ¶æ€ï¼‰ï¼Œå½“è°ƒç”¨nextæ–¹æ³•æ—¶ï¼Œè¯¥ä¸Šä¸‹æ–‡ç¯å¢ƒåˆä¼šé‡æ–°åŠ å…¥å †æ ˆï¼Œå†»ç»“çš„å˜é‡å’Œå¯¹è±¡æ¢å¤æ‰§è¡Œ

```js
// ğŸ…ï¼šyieldè¡¨è¾¾å¼

// è‹¥yieldè¡¨è¾¾å¼å‡ºç°åœ¨èµ‹å€¼è¡¨è¾¾å¼å³ä¾§ï¼Œèµ‹å€¼å·¦ä¾§çš„å˜é‡å€¼ä¸ºundefined
function* ge () {
  return (yield 9)
}

// ç»“æœï¼š
const g = ge() // ge {<suspended>}
g.next()       // {value: 9, done: false}
g.next()       // {value: undefined, done: true}

// ğŸ§ƒï¼šè®©å¯¹è±¡å¯éå†
const myObj = {}
myObj[Symbol.iterator] = function* () {
  yield Date.now()
  yield Date.now()
  yield Date.now()
}

[...myObj]    // [value1, value2, value3]
```

## nextæ–¹æ³•

1. yieldè¡¨è¾¾å¼æœ¬èº«æ— è¿”å›å€¼ï¼Œæˆ–è€…è¯´è¿”å›undefined
2. nextæ–¹æ³•å¯ä»¥å¸¦ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°ä¼šå½“ä½œä¸Šä¸€ä¸ªyieldè¡¨è¾¾å¼çš„è¿”å›å€¼ï¼šğŸ§‚
   1. å¯ä»¥é€šè¿‡è¿™ä¸ªç‰¹æ€§ï¼Œç»™generatorå‡½æ•°æ³¨å…¥ä¸åŒçš„å€¼ï¼Œç„¶åæ”¹å˜å‡½æ•°çš„è¡Œä¸ºğŸ•
   2. ç”±äºnextæ–¹æ³•çš„å‚æ•°æ˜¯ä½œä¸ºä¸Šä¸€ä¸ªyieldè¡¨è¾¾å¼çš„è¿”å›å€¼ï¼Œæ‰€ä»¥åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨nextæ–¹æ³•æ—¶ä¼ å‚æ˜¯æ— æ•ˆçš„ï¼ŒV8å¼•æ“ä¼šå¿½ç•¥ç¬¬ä¸€æ¬¡nextçš„å‚æ•°ï¼›ç¬¬ä¸€ä¸ªnextæ–¹æ³•ä¹Ÿå¯ä»¥è¯´æ˜¯æ¥å¯ç”¨éå†å™¨å¯¹è±¡çš„ï¼ˆåªæœ‰ç¬¬ä¸€æ¬¡è°ƒç”¨nextæ–¹æ³•ï¼Œæ‰ä¼šæ‰§è¡Œgeneratorå†…éƒ¨çš„ä»£ç ï¼‰
   3. è‹¥æƒ³åœ¨ç¬¬ä¸€æ¬¡nextæ—¶å°±å°†å‚æ•°ä¼ å…¥å†…éƒ¨ï¼Œéœ€è¦å†æ¬¡åµŒå¥—ä¸€ä¸ªå‡½æ•°ğŸ¥ã€å½“å‰æœªæ‡‚ã€‘

```js
// ğŸ§‚ï¼šyieldè¡¨è¾¾å¼ï¼š
function* foo(x) {
  var y = 2 * (yield (x + 1));
  var z = yield (y / 3);
  return (x + y + z);
}

// æ­¤æ—¶ï¼šå¾—åˆ°ï¼šfoo {<suspended>}
const f = foo(5)
// æ­¤æ—¶ï¼š
// 1. æ‰§è¡Œï¼šyield (x + 1)ï¼Œè¿”å›ï¼š{ value: 6, done: false }
f.next()
// æ­¤æ—¶ï¼š
// 1. æ‰§è¡Œï¼šy = 2 * (yield (x + 1)), ç”±äºnextæ— å‚ï¼Œæ•…ï¼šy = 2 * undefined = NaN
// 2. æ‰§è¡Œï¼šyield (y / 3), ç”±äºy = NaNï¼Œè¿”å›ï¼š{ value: NaN, done: false }
f.next()
// æ­¤æ—¶ï¼š
// 1. æ‰§è¡Œï¼šz = yield(y / 3)ï¼Œç”±äºnextæ— å‚ï¼Œæ•…ï¼šz = undefined
// 2. æ‰§è¡Œï¼šreturn (x + y + z)ï¼Œå³ï¼šreturn (5 + NaN + undefined), è¿”å›ï¼š{ value: NaN, done: true }
f.next()

// ğŸ•ï¼šçŠ¶æ€çš„æš‚åœ/æ¢å¤ï¼šæ— é™è¿è¡Œçš„generatorå‡½æ•°
function* status () {
  for (let i = 0; true; i++) {
    const reset = yield i
    if (reset) {
      i = -1
    }
  }
}

const s = status()
s.next()    // { value: 0, done: false }
s.next()    // { value: 1, done: false }
s.next()    // { value: 2, done: false }
s.next(3)   // { value: 0: done: false }

// ğŸ¥ï¼šç¬¬ä¸€æ¬¡å°±å°†å‚æ•°ä¼ å…¥ç”Ÿæˆå‡½æ•°ä¸­ã€æœªæ‡‚ã€‘
function wrapper(generatorFunction) {
  return function (...args) {
    let generatorObject = generatorFunction(...args);
    // æ­¤å¤„åº”è¯¥æ˜¯å…ˆæ‰§è¡Œä¸€æ¬¡nextï¼Œç„¶åå†æ‰§è¡Œå°±ç›¸å½“äºå°†å‚æ•°ä¼ å…¥äº†
    generatorObject.next();
    return generatorObject;
  };
}

const wrapped = wrapper(function* () {
  console.log(`First input: ${yield}`);
  return 'DONE';
});

wrapped().next('hello!')
// First input: hello!
```

## for..ofå¾ªç¯

1. for..ofå¾ªç¯å¯ä»¥è‡ªåŠ¨éå†Generatorå‡½æ•°è¿è¡Œæ—¶ç”Ÿæˆçš„iteratorå¯¹è±¡ï¼Œå¹¶ä¸”ä¸å†éœ€è¦è°ƒç”¨nextæ–¹æ³•ï¼š
2. ä¸€æ—¦nextæ–¹æ³•è¿”å›çš„å¯¹è±¡doneå±æ€§ä¸ºtrueï¼Œè¯¥å¾ªç¯ä¼šè¢«ç»ˆæ­¢ï¼Œä¸”ä¸åŒ…å«è¯¥è¿”å›å¯¹è±¡ï¼›å³for..ofå¾ªç¯åªä¼šéå†yieldè¯­å¥ï¼Œä¸ä¼šéå†return
3. åˆ©ç”¨for..ofï¼Œç»“åˆgeneratorï¼Œå¯ä»¥éå†ä»»ä½•å¯¹è±¡çš„æ–¹æ³•ï¼šğŸ
4. for..ofã€æ‰©å±•è¿ç®—ç¬¦(...)ã€è§£æ„èµ‹å€¼ã€Array.fromè°ƒç”¨çš„ï¼Œéƒ½æ˜¯éå†å™¨æ¥å£ï¼Œéƒ½å¯ä»¥å°†generatorè¿”å›çš„å¯¹è±¡ä½œä¸ºå‚æ•°

```js
// ğŸï¼šéå†å¯¹è±¡ï¼šfor..of + generator
function* objectEntries(obj) {
  const propKeys = Reflect.ownKeys(obj)

  for (let propKey of propKeys) {
    yield [propKey, obj[propKey]]
  }
}

const name = { firstName: 'jade', lastName: 'chou' }

// ç¬¬ä¸€ç§ï¼šéå†å¯¹è±¡çš„é”®: [['firstName', 'jade'], ['lastName', 'chou']]
[...objectEntries(name)]

// ç¬¬äºŒç§ï¼š[['firstName', 'jade'], ['lastName', 'chou']]
name[Symbol.iterator] = objectEntries
[...name]
```

## Generator.prototype.throw()

1. generatorè¿”å›çš„éå†å™¨å¯¹è±¡ï¼Œéƒ½æœ‰ä¸€ä¸ªthrowæ–¹æ³•ï¼šå³åœ¨å‡½æ•°ä½“å¤–ä½¿ç”¨è¯¥æ–¹æ³•æŠ›å‡ºé”™è¯¯ï¼Œç„¶ååœ¨generatorå‡½æ•°ä½“å†…æ•è·é”™è¯¯ï¼ˆå‰æå‡½æ•°ä½“å†…å¿…é¡»æœ‰try-catchï¼Œå¦åˆ™è¢«å¤–éƒ¨çš„catchæ•è·/æŠ›å‡ºå¼‚å¸¸ï¼‰
2. throwæ–¹æ³•æ¥å—ä¸€ä¸ªå‚æ•°ï¼ˆå»ºè®®ä½¿ç”¨Errorå®ä¾‹ï¼‰ï¼Œè¯¥å‚æ•°ä¼šè¢«generatorä¸­çš„catchè¯­å¥æ¥æ”¶
3. throwæ–¹æ³•æŠ›å‡ºçš„é”™è¯¯è¦è¢«å†…éƒ¨çš„catchæ•è·ï¼Œå‰ææ˜¯å¿…é¡»æ‰§è¡Œä¸€æ¬¡nextæ–¹æ³•ï¼ˆç¬¬ä¸€æ¬¡çš„nextç›¸å½“äºå¯åŠ¨æ‰§è¡Œgeneratorå†…éƒ¨çš„ä»£ç ï¼‰
4. throwæ–¹æ³•è¢«å†…éƒ¨catchæ•è·ä¹‹åï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œä¸‹ä¸€æ¡yieldè¯­å¥ï¼ˆå³è‡ªåŠ¨æ‰§è¡Œä¸€æ¬¡nextæ–¹æ³•ï¼‰
5. å½“generatorå‡½æ•°ä½“å†…æŠ›å‡ºé”™è¯¯æ—¶ï¼Œè‹¥å‡½æ•°ä½“å†…æœ‰catchï¼Œå°†è¢«æ•è·ï¼Œå¦åˆ™è¢«å¤–éƒ¨çš„catchæ•è·ï¼Œå¦åˆ™ä¸­æ–­æ‰§è¡Œï¼ŒæŠ›å‡ºå¼‚å¸¸
6. å½“generatorå‡½æ•°ä½“å†…æŠ›å‡ºé”™è¯¯ï¼Œä¸”å†…éƒ¨æ— catchè¯­å¥ï¼Œåˆ™è¯¥ç”Ÿæˆå™¨å‡½æ•°ä¸å†æ‰§è¡Œï¼›å½“å†æ¬¡è°ƒç”¨nextæ–¹æ³•æ—¶ï¼Œè¿”å›`{value: undefined, done: true}`

## Generator.prototype.return()

1. å®šä¹‰ï¼šè¿”å›ç»™å®šçš„å€¼ï¼ˆå‚æ•°ï¼‰ï¼Œå¹¶ä¸”ç»ˆæ­¢éå†Generatorå‡½æ•°ï¼š`{ value: å‚æ•°, done: true }`ï¼Œä¸‹æ¬¡å†æ¬¡è°ƒç”¨æ—¶ï¼Œæ€»æ˜¯è¿”å›ï¼š`{ value: undefined, done: true }`
2. è‹¥Generatorå‡½æ•°å†…éƒ¨æœ‰try-catch-finallyè¯­å¥ï¼Œä¸”æ­£åœ¨æ‰§è¡Œtryå—ï¼Œåˆ™returnæ–¹æ³•ä¼šç›´æ¥è¿›å…¥finallyå—æ‰§è¡Œï¼Œè¿”å›çš„å€¼æ˜¯finallyå—ä¸­ç¬¬ä¸€ä¸ªyieldï¼Œæ‰§è¡Œå®Œæ‰€æœ‰çš„å†…å®¹åï¼Œæ‰è¿”å›`{ value: å‚æ•°, done: true }`

## next()ã€throw()ã€return()çš„å¼‚åŒç‚¹

1. ç›¸åŒç‚¹ï¼šéƒ½æ˜¯æ¢å¤æ‰§è¡Œgeneratorå‡½æ•°
2. ä¸åŒç‚¹ï¼š
   1. next()æ˜¯æŠŠyieldè¯­å¥æ›¿æ¢æˆä¸€ä¸ªå‡½æ•°å‚æ•°/undefined
   2. throw()æ˜¯æŠŠyieldè¯­å¥æ›¿æ¢æˆthrowè¯­å¥ï¼Œç„¶åé¡ºä¾¿æ‰§è¡Œä¸‹ä¸€æ¡yield
   3. return()æ˜¯æŠŠyieldè¯­å¥æ›¿æ¢æˆreturnè¯­å¥ï¼Œç„¶åç»“æŸä»£ç å—çš„æ“ä½œï¼Œæœ‰finallyå—åˆ™è¿›å…¥finallyå—ä¸­

## yield*è¡¨è¾¾å¼

1. å®šä¹‰ï¼šåœ¨generatorå‡½æ•°ä¸­æ‰§è¡Œå¦ä¸€ä¸ªgeneratorå‡½æ•°ï¼ˆè‡ªåŠ¨éå†ï¼‰ï¼Œå°±ä¸éœ€è¦è‡ªå·±åœ¨generatoræ‰‹åŠ¨éå†generatorå‡½æ•°äº†ğŸ…
2. ä»è¯­æ³•è§’åº¦è¯´ï¼Œè‹¥yieldåé¢è·Ÿçš„æ˜¯ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œåˆ™éœ€åœ¨yieldåé¢åŠ ä¸Šä¸ª*å·ï¼Œè¡¨æ˜ä»–è¿”å›çš„æ˜¯éå†å™¨å¯¹è±¡
3. å…·å¤‡iteratoræ¥å£çš„æ•°æ®ç»“æ„ï¼Œéƒ½å¯ä»¥è¢«yield*éå†ï¼Œæ¯”å¦‚ï¼šStringã€Arrayã€Mapã€Setã€argumentsã€NodeList
   1. yield*å¹³é“ºæ•°ç»„ğŸ¥¥
   2. yield*éå†å®Œå…¨äºŒå‰æ ‘ã€æœªçœ‹ã€‘

```js
// yield*è¯­å¥
function exap1 () {
  yield 1
  yield 2
  yield 3
  return 4
}

function exap2 () {
  yield 11
  yield 12
  yield* exap1()
  // è‹¥éœ€è·å–exap1çš„è¿”å›å€¼ï¼Œåˆ™éœ€å†™æˆï¼šconst value = yield* exap1()
  yield 13
  return 14
}

function exap3 () {
  yield 11
  yield 12
  // è‹¥ä¸æ˜¯yield*ï¼Œåˆ™è¿è¡Œåˆ°æ­¤å¤„ï¼šexap3.next().valueä¸ºä¸€ä¸ªéå†å™¨å¯¹è±¡
  yield exap1()
  yield 13
  return 14
}

// ç­‰åŒäºï¼š
function exap2 () {
  yield 11
  yield 12
  yield 1
  yield 2
  yield 3
  // æ— return
  yield 13
  return 14
}

// ç­‰åŒäº
function exap2 () {
  yield 11
  yield 12
  for (let i of exap1()) {
    yield i
  }
  yield 13
  return 14
}

// ğŸ¥¥ï¼šyield*å¹³é“ºæ•°ç»„ï¼š
function* flatArray (arr) {
  if (Array.isArray(arr)) {
    for (let i = 0; i < arr.length; i++) {
      yield* flatArray(arr[i])
    }
  } else {
    yield arr
  }
}

[...flatArray(arr)]
```

## ä½œä¸ºå¯¹è±¡å±æ€§çš„generatorå‡½æ•°

```js
// è‹¥ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ä¸ºgeneratorå‡½æ•°ï¼Œåˆ™å†™æˆï¼š
const obj = {
  *generator () {
    // ...
  },
  // ç›¸å½“äºï¼š
  generator: function* () {
    // ...
  }
}
```

## generatorå‡½æ•°çš„this

1. generatorå‡½æ•°æ€»æ˜¯è¿”å›ä¸€ä¸ªéå†å™¨(g)ï¼Œè¯¥éå†å™¨æ˜¯generatorå‡½æ•°çš„å®ä¾‹(`g instaceof generator === true`)ï¼Œå¹¶ä¸”ç»§æ‰¿äº†generatorå‡½æ•°åŸå‹å¯¹è±¡ä¸Šçš„æ–¹æ³•(`g.me() === generator.prototype.me()`)
2. è‹¥æŠŠgeneratorå½“æˆæ„é€ å‡½æ•°ï¼Œå¹¶ä¸ä¼šç”Ÿæ•ˆï¼Œå› ä¸ºgeneratorè¿”å›çš„æ˜¯éå†å™¨å¯¹è±¡ï¼Œè€Œéthiså¯¹è±¡ğŸ³
3. generatorä¸èƒ½è·Ÿnewä¸€èµ·ä½¿ç”¨ï¼Œä¼šæŠ¥ç±»å‹é”™è¯¯ï¼ˆä¸æ˜¯ä¸€ä¸ªæ„é€ å™¨ï¼‰
4. è®©generatorèƒ½å¤Ÿè¿”å›thiså¹¶ä¸”èƒ½å¤Ÿä½¿ç”¨newğŸš

```js
// ğŸ³ï¼š
function* generator() {
  this.a = 11
}

const g = generator()
g.next()
g.a   // undefinedï¼Œæ‹¿ä¸åˆ°å±æ€§açš„å€¼

// ğŸšï¼šgeneratoræœ‰thisï¼Œå¹¶ä¸”å’Œnewä½¿ç”¨
function* gen() {
  this.a = 12
  yield this.b = 13
  yield this.c = 14
}

function generator () {
  return gen.call(gen.prototype)
}

const g = new generator()
g.next()
g.next()
g.next()
console.log(g.a, g.b, g.c)
```

## generatorå®ç°çŠ¶æ€æœº

1. generatoræ˜¯å®ç°çŠ¶æ€æœºçš„æœ€ä½³ç»“æ„ï¼šæœ¬èº«åŒ…å«äº†ä¸€ä¸ªçŠ¶æ€ä¿¡æ¯ï¼Œå³ç›®å‰æ˜¯å¦å¤„äºæš‚åœçŠ¶æ€

```js
// es5çŠ¶æ€æœº
const ticking = true
const clock = function () {
  if (ticking) {
    console.log('tick')
  } else {
    console.log('tock')
  }
  ticking = !ticking
}

// es6çŠ¶æ€æœº:æ›´ç®€æ´ï¼Œæ›´å®‰å…¨ï¼ŒçŠ¶æ€ä¸ä¼šè¢«ç¯¡æ”¹ï¼Œç¬¦åˆå‡½æ•°å¼ç¼–ç¨‹æ€æƒ³
const clock = function* () {
  while(true) {
    console.log('tick')
    yield;
    console.log('tock')
    yield;
  }
}
```

## generatorä¸åç¨‹ã€æœªå®ç°ã€‘

## generatoråº”ç”¨åœºæ™¯ã€æœªå®ç°ã€‘

1. 
