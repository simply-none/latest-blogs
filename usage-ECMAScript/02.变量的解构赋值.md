# å˜é‡çš„è§£æ„èµ‹å€¼

å®šä¹‰ï¼šES6å…è®¸æŒ‰ç…§ä¸€å®šçš„æ¨¡å¼ï¼Œä»æ•°ç»„å’Œå¯¹è±¡ä¸­æå–å€¼ï¼Œå¹¶èµ‹å€¼ç»™å˜é‡

## æ•°ç»„çš„è§£æ„èµ‹å€¼

å…¬å¼ï¼š[variable = defaultVal] = [value]

1. ğŸ¥è§£æ„èµ‹å€¼å±äºï¼ˆéƒ¨åˆ†ï¼‰æ¨¡å¼åŒ¹é…ï¼Œåªè¦ç­‰å·ä¸¤è¾¹çš„æ¨¡å¼ç›¸åŒï¼Œå³è¾¹çš„å˜é‡å°±ä¼šèµ‹äºˆå¯¹åº”çš„å€¼
   1. è§£æ„å¤±è´¥ï¼Œå˜é‡çš„å€¼ä¸ºundefined
   2. ğŸ¥è‹¥å³è¾¹ä¸æ˜¯æ•°ç»„ï¼ˆéå¯éå†ç»“æ„ï¼Œæ— iteratoræ¥å£ï¼‰ï¼Œå°†ä¼šæŠ¥é”™
2. ğŸ¥™è§£æ„å…è®¸æŒ‡å®šé»˜è®¤å€¼ï¼Œä»…å½“å³ä¾§æ•°ç»„å…ƒç´ ä¸¥æ ¼ç­‰äº`===`undefinedæ—¶ï¼Œé»˜è®¤å€¼æ‰æœ‰æ•ˆ
   1. ğŸ§€é»˜è®¤å€¼å¯å¼•ç”¨è§£æ„èµ‹å€¼çš„å…¶ä»–å˜é‡ï¼Œä½†è¯¥å˜é‡å¿…é¡»å·²ç»å£°æ˜ï¼›åœ¨é»˜è®¤å€¼ä¸ä¼šç”Ÿæ•ˆæ—¶ï¼Œå³ä½¿æ˜¯æœªå£°æ˜å˜é‡ï¼Œä¹Ÿä¸ä¼šæŠ¥é”™
   2. é»˜è®¤å€¼å¯ä»¥æ˜¯å‡½æ•°ã€å…¶ä»–å˜é‡ç­‰ç­‰

```javascript
// ğŸ¥ï¼šæ¨¡å¼åŒ¹é…
let [a, b, c] = [1, 2, 3]
let [a, [b], c] = [1, [2], 3]
let [ , , c] = [1, 2, 3]
let [a, , c] = [1, 2, 3]
// a: 1, c: [2, 3]
let [a, ...c] = [1, 2, 3]
// a: 1, b: undefined, c: []
let [a, b, ...c] = [1]

// ğŸ¥ï¼šéƒ¨åˆ†æ¨¡å¼åŒ¹é…
let [a, b] = [1, 2, 3]
let [a, [b], c] = [1, [2], 3]

// ğŸ¥ï¼šTypeError: 1 is not iterable
let [a] = 1

// ğŸ¥™ï¼šæŒ‡å®šé»˜è®¤å€¼
let [a = true] = []
let [a, b = true] = [1, undefined]
let [a = 1] = [null]    // a: null

// ğŸ§€ï¼šå¼•ç”¨å…¶ä»–é»˜è®¤å€¼
let [a = 1, b = a] = [1]
let [a = b, b = 1] = [1, 2]
```

## å¯¹è±¡çš„è§£æ„èµ‹å€¼

å…¬å¼ï¼š{ mode: variable = defaultVal} = { mode: value} || { mode = defaultVal } = { mode: value}

1. ğŸµå˜é‡éœ€è¦ä¸å¯¹è±¡å±æ€§åŒåï¼Œæ‰èƒ½å–åˆ°æ­£ç¡®çš„å€¼
   1. æœ¬è´¨ä¸Šå·¦å³ä¸¤è¾¹éƒ½æ˜¯é”®å€¼å¯¹çš„å½¢å¼ï¼ŒæŸ¥è¯¢ç›¸åŒçš„é”®ï¼Œå¹¶èµ‹å€¼
   2. æ— å¯¹åº”åŒåå±æ€§ï¼Œå€¼ä¸ºundefined
   3. ğŸ‚å¯å°†å¯¹è±¡ï¼ˆæ¯”å¦‚Mathã€stringï¼‰çš„æ–¹æ³•èµ‹ç»™å˜é‡
   4. ğŸ§Š**ç­‰å¼å·¦è¾¹çš„é”®å±äºæ¨¡å¼**
   5. å¯¹è±¡è§£æ„èµ‹å€¼å¯ä»¥å–åˆ°ç»§æ‰¿çš„å±æ€§
2. ğŸœç”±äºæ•°ç»„æ˜¯ç‰¹æ®Šçš„å¯¹è±¡ï¼Œå¯å¯¹æ•°ç»„è¿›è¡Œå¯¹è±¡çš„å±æ€§è§£æ„
3. ğŸ§ƒå¯¹å·²ç»å£°æ˜çš„å˜é‡è¿›è¡Œèµ‹å€¼è§£æ„éœ€ä½¿ç”¨åœ†æ‹¬å·å°†æ•´ä¸ªè¡¨è¾¾å¼æ‹¬èµ·æ¥ï¼Œå› ä¸ºjså¼•æ“ä¼šå°†å¤§æ‹¬å·ç†è§£æˆä¸€ä¸ªä»£ç å—ï¼Œä»è€Œå‘ç”Ÿè¯­æ³•é”™è¯¯ï¼ˆSyntaxError: Unexpected token '='ï¼‰
4. è§£æ„èµ‹å€¼å…è®¸ç­‰å·å·¦è¾¹çš„æ¨¡å¼ä¸­ä¸æ”¾ä»»ä½•å˜é‡ï¼Œæ•…è€Œä¼šæœ‰ä¸‹é¢çš„éƒ½æ­£ç¡®çš„å¥‡æ€ªè¡¨è¾¾å¼ï¼š
   1. ({} = [true, false]);
   2. ({} = 1);
   3. ({} = []);
5. å¯¹è±¡çš„æ™®é€šå˜é‡ä¸æ‰©å±•è¿ç®—ç¬¦`...`ç»“åˆä½¿ç”¨æ—¶çš„è§£æ„èµ‹å€¼æƒ…å½¢ï¼š`{ ...obj } = {a: 1, b: 2, c: 3} => obj: {a: 1, b: 2, c: 3}`
   1. å¯¹è±¡çš„è§£æ„èµ‹å€¼ï¼Œå°†ç›®æ ‡å¯¹è±¡è‡ªèº«çš„å¯éå†å±æ€§ã€å°šæœªè¢«è¯»å–çš„å±æ€§åˆ†é…åˆ°æŒ‡å®šçš„å¯¹è±¡ä¸­
   2. è§£æ„èµ‹å€¼ç­‰å¼å³ä¾§å¿…é¡»æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå½“ä¸ºundefinedã€nullç­‰å¸¸é‡æ—¶ï¼Œä¼šæŠ¥é”™ï¼Œå…¶æ— æ³•è½¬ä¸ºå¯¹è±¡
   3. è§£æ„èµ‹å€¼å¿…é¡»æ˜¯æœ€åä¸€ä¸ªå‚æ•°
   4. è§£æ„èµ‹å€¼çš„æ‹·è´æ˜¯æµ…æ‹·è´ï¼Œå½“å¯¹è±¡å±æ€§å€¼ä¸ºä¸€ä¸ªç¬¦åˆç±»å‹æ—¶ï¼Œæ‹·è´çš„æ˜¯è¯¥å±æ€§çš„å¼•ç”¨
   5. è§£æ„èµ‹å€¼ï¼Œä¸èƒ½å¤åˆ¶ç»§æ‰¿è‡ªåŸå‹çš„å±æ€§
   6. è§£æ„èµ‹å€¼å¯ç”¨äºæ‰©å±•å‡½æ•°çš„å‚æ•°ï¼Œå¯¹å‡½æ•°è¿›è¡Œå¢å¼ºæ“ä½œğŸ§

æ¡ˆä¾‹ï¼š
```javascript
// ğŸµ
let {a, b} = {a: 1, b: 2}
// ç­‰åŒäºä¸Šé¢
let {a: a, b: b} = {a: 1, b: 2}
let {c} = {a: 1}  // c: undefined
// ğŸ‚
let {random, floor, ceil} = Math
// ğŸ§Š
// a: ReferenceError: a is not defined  b: 1
let {a: b} = {a: 1}

// ğŸ§Š:åµŒå¥—è§£æ„
let a = {
  b: [1, {
    c: 2
  }]
}
// b: ReferenceError: a is not defined  d: 1, c: 2
let {b: [d, {c}]} = a
// b: [1, {c: 2}] d: 1, c: 2
let {b, b: [d, {c}]} = a

// ğŸ§Š
const node = {
  loc: {
    start: {
      line: 1,
      column: 5
    }
  }
}
// åˆ†ä¸‰æ¬¡è§£æ„
// ç¬¬ä¸€æ¬¡ï¼šlocæ˜¯æ¨¡å¼ï¼Œlocæ˜¯å˜é‡
// ç¬¬äºŒæ¬¡ï¼šlocæ˜¯æ¨¡å¼ï¼Œstartæ˜¯å˜é‡
// ç¬¬ä¸‰æ¬¡ï¼šlocã€startæ˜¯æ¨¡å¼ï¼Œlineæ˜¯å˜é‡
let { loc, loc: { start }, loc: { start: { line }} } = node

// ğŸ§ŠTypeError: Cannot destructure property 'gdt' of 'undefined' as it is undefined.
// è§£æ„æ­¥éª¤ï¼š
// 1ï¼Œfooï¼š undefined
// 2ï¼Œ{bar} = undefined
let {foo: {bar}} = {baz: 'baz'}

// ğŸœ
let a = [1, 2, 3]
let { 0: first, [arr.length - 1]: last} = a
// first: 1, last: 3

// ğŸ§ƒ
// SyntaxError: Unexpected token '='
let a
{a} = {a: 1}

// success
let a
({a} = {a: 1})

// ğŸ§è§£æ„èµ‹å€¼ç»“åˆæ‰©å±•è¿ç®—ç¬¦ä½¿ç”¨ï¼Œå¯¹å‡½æ•°è¿›è¡Œæ‰©å±•
function baseFunction ({a, b}) {
   // å‡½æ•°æ“ä½œ
}

function wrapperFunction ({x, y, ...other}) {
   // å¼•å…¥çš„å…¶ä»–å¢å¼ºæ“ä½œ
   // .......
   return baseFunction(other)
}
```

## å­—ç¬¦ä¸²çš„è§£æ„èµ‹å€¼

1. ğŸ–å­—ç¬¦ä¸²è§£æ„æ—¶ä¼šè½¬æˆç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œå«æœ‰lengthå±æ€§
   1. æ•°ç»„è§£æ„ï¼š 
   2. å¯¹è±¡è§£æ„ï¼š

æ¡ˆä¾‹ï¼š
```javascript
// æ•°ç»„è§£æ„
// a: h, b: e, c: l
let [a, b, c] = 'hello'

// å¯¹è±¡è§£æ„ï¼š
// a: h, length: 5
let {0: a, length} = 'hello'
```

## æ•°å€¼å’Œå¸ƒå°”å€¼çš„è§£æ„èµ‹å€¼

1. æ•°å€¼å’Œå¸ƒå°”å€¼è§£æ„æ—¶ï¼Œå‡ä¼šå…ˆè½¬ä¸ºåŒ…è£…å¯¹è±¡ï¼ŒåŒ…è£…å¯¹è±¡å…·æœ‰toStringå±æ€§
2. **ç”±äºundefinedå’Œnullæ— æ³•è½¬ä¸ºå¯¹è±¡ï¼Œè§£æ„èµ‹å€¼ä¼šæŠ¥é”™**

æ¡ˆä¾‹ï¼š
```javascript
// toString: Number.prototype.toString
let {toString} = 123
// 
let {}

```

## å‡½æ•°å‚æ•°çš„è§£æ„èµ‹å€¼

1. å‡½æ•°å‚æ•°è§£æ„ï¼š
   1. ([a, b]) <= ([1, 2])
   2. ä¸ºå˜é‡æŒ‡å®šé»˜è®¤å€¼ï¼š({a = 1, b = 2} = {}) <= ({a: 1, b: 3})
   3. ä¸ºå‡½æ•°å‚æ•°æŒ‡å®šé»˜è®¤å€¼ï¼š({a, b} = {a: 1, b: 3}) < ({a: 1, b: 2})
2. undefinedä¼šè§¦å‘å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼

## åœ†æ‹¬å·é—®é¢˜

1. ç¼–è¯‘å™¨ä¸ä¼šäº‹å…ˆçŸ¥é“**ä¸€ä¸ªå¼å­**æ˜¯è¡¨è¾¾å¼è¿˜æ˜¯æ¨¡å¼ï¼Œå¿…é¡»è§£æï¼ˆä¸ï¼‰åˆ°ç­‰å·æ‰çŸ¥é“
2. ES6ä¸­ï¼Œåªè¦å¯èƒ½å¯¼è‡´è§£æ„æ­§ä¹‰ï¼Œå°±ä¸èƒ½ä½¿ç”¨åœ†æ‹¬å·ï¼Œå»ºè®®ä¸è¦åœ¨è§£æ„æ¨¡å¼å†…éƒ¨æ”¾ç½®åœ†æ‹¬å·ï¼Œä¸èƒ½å¾…åœ†æ‹¬å·çš„æœ‰ï¼š
   1. å‡½æ•°å‚æ•°è§£æ„
   2. èµ‹å€¼è¯­å¥ä¸­çš„æ¨¡å¼ï¼ˆéƒ¨åˆ†æˆ–æ•´ä½“ï¼‰ï¼Œæ— å˜é‡æ ‡å¿—çš„
   3. å˜é‡å£°æ˜è¯­å¥ï¼ˆå¸¦æœ‰å˜é‡æ ‡å¿—çš„letã€varç­‰ï¼‰ï¼šå·¦ä¾§å†…éƒ¨[(a)]ï¼Œå¯¹è±¡çš„å·¦ä¾§å†…éƒ¨{(x: c)}ã€å·¦ä¾§å¤–éƒ¨({x: c})ã€å·¦ä¾§å€¼{x: (c)}ã€å·¦ä¾§é”®{(x): c}
3. å¯ä»¥ä½¿ç”¨åœ†æ‹¬å·çš„ï¼š
   1. èµ‹å€¼è¯­å¥çš„éæ¨¡å¼éƒ¨åˆ†ï¼ˆæ¨¡å¼æ˜¯æŒ‡ï¼ˆæ•°ç»„çš„indexã€å¯¹è±¡çš„keyï¼‰

## è§£æ„èµ‹å€¼çš„ç”¨é€”

1. äº¤æ¢å˜é‡ï¼š[a, b] = [b, a]
2. ä»å‡½æ•°è¿”å›å¤šä¸ªå€¼ï¼ŒèŠ‚çœä»£ç é•¿åº¦ï¼š[a,b] = (function() {return [1, 2]})()



