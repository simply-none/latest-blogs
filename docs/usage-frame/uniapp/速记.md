# 速记

> 注意：    
> 若内容和实际不符，有可能是文档过时了    
> 最新内容还是得看官方文档

## 基础速记

- uniapp中使用js在不同版本、不同平台可能展示的效果不一样，有可能无法生效，遇到此种情况时应该查看官方文档或者搜索引擎
- 组件上的属性规范：
  - `:disabled="false"`：这里引号包裹的是js表达式
  - `hover-start-time=20`：这里20未被引号包裹，属于number
- 不推荐使用html标签，而是使用特定的基础组件+扩展组件（需导入）
- easycom规范：组件位于`/components|uni_modules/com-name/com-name.vue`时，就可直接在tempalte中使用

## can i use

定义：判断应用的api、回调、参数、组件等是否在当前版本可用

语法：

```javascript
// 名字.调用方式.参数/返回值.参选可选值，在app、web端不支持
uni.canIUse(${API}.${method}.${param}.${options})
// app、web端只支持
uni.canIUse(${API})

// 组件名.组件属性.组件属性可选值
uni.canIUse(${component}.${attribute}.${option})
```

## 编译及条件编译

条件编译：
- 注释内容基本都是`#ifdef %platform%`，`#ifndef %platform%`（除该平台之外）开始，尾部注释是`#endif`结束。不同语言对应的注释写法不一样，比如js/json/uts使用`//`，css使用`/* */`，vue/nvue/uvue组件使用`<!-- -->`
- platform：VUE3、UNI-APP-X、uniVersion、APP、APP-PLUS、APP-PLUS-NVUE、APP-NVUE、APP-ANDROID、APP-IOS、H5、WEB、MP（小程序）、MP-WEIXIN、MP-QQ、MP-TOUTIAO等
- 使用`||`支持多平台编译，比如`#ifdef plat1 || plat2`

```text
<!-- #ifdef %PLATFORM% -->
此处写内容
<!-- #endif -->

```

注意：
- 保证条件编译前和编译后文件都应当能够通过语法校验
- ios和Android不支持通过条件编译来区分，需要调用`uni.getSystemInfo`获取平台信息


## 组件注意事项

### 内置组件

- **视图**
- view
- scroll-view：
  - 避免使用map、video等原生组件
  - 长列表、下拉刷新性能原因使用其他组件
- swiper、swiper-item：滑块（轮播图）
- match-media：类似媒体查询，在满足条件时展示内部内容
- movable-area、movable-view：可拖拽区块
- cover-view：主要用于展示覆盖在原生组件（如map、video、canvas等，层级高于内置组件）上的文本内容
- cover-image：主要用于覆盖在原生组件上的图片内容
- **文本**
  - icon
  - text
  - rich-text：富文本（主要是dom树、html字符串）展示组件
  - progress：进度条
- **表单**
- button
- checkbox
- radio
- input
- textarea
- editor：富文本编辑器
- label
- picker：选择器
- picker-view、picker-view-column：更灵活的选择器，嵌入页面的滚动选择器
- slider：滑块
- switch：开关
- form：表单容器
- **路由、页面跳转**
- navigator
- **媒体**
- animation-view：动画组件
- audio
- video
- camera
- image
- live-player：实时音视频播放（直播拉流）
- live-pusher：实时音视频录制（直播推流）
- **地图**：
- map
- **画布**：
- canvas
- **webview**：
- web-view：web浏览器组件，用于装载网页
- **广告**
- **unicloud-db云数据库**
- **页面配置节点组件**
- page-meta：页面属性配置组件
- navigation-bar：页面导航条配置组件
- custom-tab-bar：自定义tabbar组件

### vue组件

- 全平台支持：template、slot
- h5支持：component、transition、transition-group、keep-alive

### nvue专有组件

- barcode：扫码
- list：高性能的列表组件
- recycle-list：具备回收复用的列表容器
- waterfall：提供瀑布流布局的核心组件
- cell：作为list、recycler、waterfall的子组件
- refresh：为容器提供下拉刷新功能，作为list、scroll-view、waterfall的子组件

### 小程序组件

- official-account：微信公众号关注组件
- open-data：展示平台提供的开放数据

### 扩展组件库

- 全端组件：uni-ui、color ui、thorui、graceui、uviewui
- only web：element、iview
- 小程序自定义组件：vant weapp、iview weapp

## 小程序自定义组件

定义：
- 小程序组件不是vue组件
- 每家小程序都有自己的组件规范
- 小程序组件不是全端可用的
- 代码存放目录在各自的目录中，比如App/微信`wxcomponents`，其他的类同

使用：在pages.json中需要使用小程序自定义组件的页面的style->usingComponents中引入组件（可使用条件选择环境），然后就能在该页面使用了

注意：
- 小程序组件的性能不如vue组件，需要手动setData
- 使用数据和事件绑定时，应遵循vue的语法规范，即属性前添加`:`，方法使用`@`

## uniapp内的wxs语法规范

使用：

```vue
<!-- 其他家小程序，lang可改为filter、sjs等 -->
<script module="utils" lang="wxs" src="./utils.wxs">

// 内联语法，即将src删除，代码写在这里
</script>
```

注意：
- module指定的模块名，不可和data、methods、computed内的属性重名
- 在vue3中不支持setup script
- nvue不支持wxs等语法


## datacom数据驱动组件

datacom：data components，属于vue组件，是二次封装组件

特点：给它绑定一个data，即可渲染出预定的结果

缺陷：
- 不够灵活，即不能个性化定制，覆盖场景不够广泛

规范：
- 以`组件库名称-data-组件功能表达`命名
- 通过属性赋值，绑定一个data，data是json格式数据（数组、树）
- 符合uni-forms组件的表单校验规范

## web api 和JavaScript api的区别

定义：`JavaScript = ECMAScript(js语言规范) + Web APIs`

常见的web api：
- 操作文档的api：DOM（document）、BOM（window）
- 从服务器获取数据的api：XMLHttpRequest、Fetch
- 绘制和操作图形的api：canvas、webgl
- 音视频api：webrtc
- 设备api：地理定位api、系统通知api、震动硬件api
- 存储api：storage、indexeddb

